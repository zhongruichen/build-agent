# ❓ 常见问题解答 (FAQ)

本文档收集了用户在使用多智能体协作开发平台时最常遇到的问题及解决方案。

---

## 📌 目录

1. [安装与配置问题](#安装与配置问题)
2. [模型配置问题](#模型配置问题)
3. [任务执行问题](#任务执行问题)
4. [性能优化问题](#性能优化问题)
5. [错误处理](#错误处理)
6. [最佳实践](#最佳实践)

---

## 安装与配置问题

### Q: 插件安装后无法启动？

**A:** 请检查以下几点：
1. VS Code 版本是否 ≥ 1.89.0
2. 是否正确执行了 `npm install`
3. 是否成功打包了插件（`npm run package-vsix`）
4. 尝试重启 VS Code

---

### Q: 首次使用时看不到欢迎向导？

**A:** 欢迎向导只在没有配置任何模型时显示。您可以：
- 清空所有模型配置后重启插件
- 或直接进入"设置"页面手动配置

---

### Q: 配置无法保存？

**A:** 可能的原因：
1. **权限问题**：确保 VS Code 有写入配置的权限
2. **格式错误**：API密钥中不要包含空格或特殊字符
3. **网络问题**：某些配置需要验证，确保网络连接正常

---

## 模型配置问题

### Q: 不知道该选择哪个模型？

**A:** 推荐配置：

| 用途 | 推荐模型 | 原因 |
|------|---------|------|
| 复杂代码生成 | GPT-4 Turbo | 理解力强，输出质量高 |
| 快速原型开发 | GPT-3.5 Turbo | 速度快，成本低 |
| 长文本处理 | Claude 3 | 上下文窗口大 |
| 离线使用 | Ollama (Llama 3) | 完全本地，免费 |

---

### Q: API密钥在哪里获取？

**A:** 各供应商API密钥获取地址：

- **OpenAI**: [platform.openai.com/api-keys](https://platform.openai.com/api-keys)
  - 需要：信用卡绑定
  - 费用：按使用量计费
  
- **Anthropic**: [console.anthropic.com](https://console.anthropic.com/)
  - 需要：申请审核
  - 费用：按使用量计费
  
- **Google**: [makersuite.google.com](https://makersuite.google.com/app/apikey)
  - 需要：Google账号
  - 费用：有免费额度

---

### Q: 如何配置本地模型（Ollama）？

**A:** 步骤如下：

1. **安装 Ollama**
   ```bash
   # Windows/Mac/Linux
   curl -fsSL https://ollama.com/install.sh | sh
   ```

2. **下载模型**
   ```bash
   ollama pull llama3
   ```

3. **在插件中配置**
   - Provider: `Custom`
   - Model Name: `llama3:latest`
   - API Key: `not-needed`
   - Base URL: `http://localhost:11434/v1`

---

### Q: 配置多个模型的好处？

**A:** 多模型配置的优势：

1. **成本优化**：核心任务用强模型，辅助任务用经济模型
2. **性能平衡**：简单任务用快速模型，复杂任务用强大模型
3. **容错备份**：主模型失败时自动切换备用模型
4. **专长互补**：不同模型擅长不同类型的任务

---

## 任务执行问题

### Q: 任务执行很慢怎么办？

**A:** 优化建议：

1. ✅ **启用智能扫描**
   - 设置 → 高级设置 → 启用智能扫描
   - 效果：减少初始扫描时间 50-70%

2. ✅ **启用并行执行**
   - 设置 → 高级设置 → 启用并行执行
   - 效果：独立任务同时进行

3. ✅ **使用更快的模型**
   - GPT-3.5 比 GPT-4 快 3-5 倍
   - Claude Instant 比 Claude 3 快 2-3 倍

4. ✅ **优化任务描述**
   - 明确具体的需求
   - 避免模糊的指令

---

### Q: 任务中途失败了怎么办？

**A:** 解决方案：

1. **查看错误日志**
   - 事件流中会显示详细错误信息
   - 根据错误提示调整配置或任务

2. **启用任务持久化**
   - 设置 → 启用任务持久化
   - 下次启动可以从断点继续

3. **手动介入**
   - 停止任务
   - 修改已生成的部分代码
   - 重新描述剩余任务

---

### Q: 如何让AI更好地理解我的项目？

**A:** 技巧：

1. **项目结构**
   - 保持清晰的文件组织
   - 使用有意义的文件/文件夹命名

2. **添加注释**
   - 在关键代码处添加注释
   - 创建 README 说明项目结构

3. **使用配置文件**
   - package.json、tsconfig.json 等
   - AI会自动识别项目类型

4. **明确的指令**
   ```
   好的指令：
   "在 src/components 下创建一个 UserProfile 组件，
    使用 TypeScript 和 Material-UI，包含头像、姓名和简介"
   
   不好的指令：
   "创建一个用户组件"
   ```

---

## 性能优化问题

### Q: 如何减少API调用成本？

**A:** 成本控制策略：

1. **分层模型策略**
   ```javascript
   // 推荐配置
   {
     "Orchestrator": "gpt-3.5-turbo",      // 规划用便宜模型
     "Worker": "gpt-4-turbo",               // 核心执行用强模型
     "Reviewer": "gpt-3.5-turbo",           // 审查用便宜模型
     "其他角色": "gpt-3.5-turbo"            // 辅助角色用便宜模型
   }
   ```

2. **使用本地模型**
   - 非关键任务使用 Ollama
   - 混合云端和本地模型

3. **优化提示词**
   - 精简系统提示
   - 避免重复的上下文

---

### Q: 大型项目扫描太慢？

**A:** 解决方案：

1. **配置忽略规则**（即将支持）
   ```json
   {
     "ignoreDirs": ["node_modules", "dist", ".git"],
     "ignoreFiles": ["*.lock", "*.log"]
   }
   ```

2. **使用智能扫描**
   - 仅扫描文件结构
   - 按需读取文件内容

3. **分模块处理**
   - 将大项目分成多个小任务
   - 每次只处理相关模块

---

## 错误处理

### Q: 常见错误代码及解决方法

| 错误信息 | 原因 | 解决方法 |
|---------|------|---------|
| `API key invalid` | API密钥错误 | 检查密钥是否正确、是否过期 |
| `Rate limit exceeded` | 调用频率超限 | 等待几分钟或升级API计划 |
| `Context length exceeded` | 文本太长 | 启用智能扫描，减少文件数量 |
| `Model not found` | 模型名称错误 | 检查模型名称拼写 |
| `Network error` | 网络连接问题 | 检查网络和代理设置 |

---

### Q: 调试模式如何开启？

**A:** 开启调试模式：

1. 打开 VS Code 输出面板（`Ctrl/Cmd + Shift + U`）
2. 选择"多智能体助手"通道
3. 可以看到详细的执行日志

---

## 最佳实践

### Q: 如何写出AI容易理解的需求？

**A:** 需求描述模板：

```markdown
## 任务目标
[明确说明要实现什么]

## 具体要求
1. [要求1]
2. [要求2]
3. [要求3]

## 技术栈
- 语言：[如 TypeScript]
- 框架：[如 React]
- 样式：[如 TailwindCSS]

## 预期结果
[描述最终效果]

## 注意事项
- [特殊要求或限制]
```

---

### Q: 什么样的任务适合AI团队？

**A:** 

✅ **适合的任务**：
- 创建新功能模块
- 代码重构和优化
- 编写测试用例
- 生成文档
- Bug定位和修复
- 技术方案设计

❌ **不适合的任务**：
- 需要实时用户交互的任务
- 需要访问外部私有API的任务
- 涉及敏感数据处理的任务
- 需要人工审美判断的设计任务

---

### Q: 如何提高任务成功率？

**A:** 技巧总结：

1. **渐进式开发**
   - 从简单功能开始
   - 逐步增加复杂度

2. **明确的验收标准**
   - 列出具体的功能点
   - 提供测试用例

3. **及时的人工干预**
   - 发现问题立即停止
   - 手动修正后继续

4. **合理的任务拆分**
   - 大任务拆成小任务
   - 每个任务专注一个目标

---

## 🆘 还有其他问题？

如果您的问题在这里没有找到答案：

1. 📖 查看[完整文档](README.md)
2. 🔍 搜索[项目 Issues](https://github.com/zhongruichen/open-agent-system/issues)
3. ❓ 提交新的 Issue
4. 💬 加入社区讨论

---

*本FAQ会持续更新，欢迎贡献您遇到的问题和解决方案！*