# 多智能体助手 - 详细使用指南

欢迎！本指南将带您深入了解如何配置和使用本插件的全部功能，释放AI团队的全部潜力。

---

## 目录
1.  [首次安装与配置](#1-首次安装与配置)
2.  [主界面导览](#2-主界面导览)
3.  [实战教程：创建您的第一个项目](#3-实战教程创建您的第一个项目)
4.  [高级配置：打造您自己的AI团队](#4-高级配置打造您自己的ai团队)
5.  [高级功能详解](#5-高级功能详解)

---

### 1. 首次安装与配置

正确的配置是成功的一半。

1.  **安装插件:** 请遵循 [**INSTALL.md (安装指南)**](INSTALL.md) 来安装本插件。
2.  **启动任务:** 打开命令面板 (`Ctrl/Cmd + Shift + P`), 输入并选择 `开始多智能体任务`。一个UI面板将会打开。
3.  **进入设置:** 在UI面板中，点击 **"设置"** 标签页。
4.  **运行健康检查:** 点击 **"运行健康检查"** 按钮。对于初次安装，系统会提示“没有定义任何模型”。
5.  **添加您的第一个AI模型:**
    - 在“模型定义”区域，点击 **"添加新模型"**。
    - **填写模型信息:**
        - `name`: 给模型起一个唯一的、好记的名字 (例如, "gpt-4o")。
        - `provider`: 选择您的AI服务提供商 (例如, `OpenAI`)。
        - `modelName`: 填入具体的模型名称 (例如, `gpt-4o`)。
        - `apiKey`: 填入您的API密钥。
    - 点击 **"保存设置"**。
6.  **分配模型给角色:**
    - 现在，在“角色配置”区域，您会看到一个角色列表 (Orchestrator, Worker, 等)。
    - 对于每个角色，从其对应的下拉菜单中选择您刚刚创建的模型 (例如, "gpt-4o")。
    - **关键建议:** 至少为 `Orchestrator` 和 `Worker` 分配模型。
    - 再次点击 **"保存设置"**。
7.  **重新运行健康检查:** 再次点击 **"运行健康检查"**。这次，所有检查都应该显示为成功。

**恭喜！您的AI团队已准备就绪。**

---

### 2. 主界面导览

UI面板是您与AI团队交互的核心。

#### **"任务状态" 标签页**
这是默认视图，用于在任务运行时进行监控。
- **总体目标**: 显示您最初设定的任务目标。
- **当前计划**: 一个可交互的任务列表。您可以点击任何一个任务来展开查看其执行结果或错误信息。
- **执行日志**: 一个实时的、人类可读的日志流，告诉您当前正在发生什么。
- **最终产物**: AI团队生成的最终代码或报告会在这里实时更新。代码会被自动进行语法高亮。

#### **"工作区状态" 标签页**
提供了一个关于您当前VS Code工作区的快照。
- **文件系统**: 显示项目的文件和目录结构。
- **Git状态**: 显示当前的Git分支和已修改/暂存的文件。
- **调试器**: 显示当前活动的断点列表。

#### **"设置" 标签页**
这是插件的控制中心，所有配置都在这里完成，无需手动编辑JSON。
- **模型定义**: 在这里进行AI模型的增、删、改、查。
- **角色配置**: 在这里为角色分配模型，或进行更高级的自定义（见下文）。
- **功能开关**: 在这里启用或禁用插件的各项高级功能。

---

### 3. 实战教程：创建您的第一个项目

让我们以一个具体的例子，来走完整个流程：“**创建一个简单的HTML页面，页面包含一个按钮，点击按钮时弹出一个‘你好，世界！’的提示框。**”

1.  **启动任务:** 打开命令面板 (`Ctrl/Cmd + Shift + P`)，选择 `开始多智能体任务`。
2.  **下达指令:** 在屏幕顶部弹出的输入框中，输入我们的目标，然后按下回车。
3.  **审查计划:**
    - 在UI的“当前计划”区域，AI项目经理会为您呈现一个初步的行动计划。
    - 您可以检查这些步骤。如果觉得没问题，点击绿色的 **"批准计划"** 按钮。如果您想修改，可以直接在文本框中编辑，然后点击批准。
4.  **观察执行:**
    - 任务开始执行，您可以在“当前计划”中看到每个任务的状态变化，并在“执行日志”中看到实时的文字更新。
    - **最终产物**窗口会显示正在被创建的HTML和JavaScript代码。
5.  **与AI交互 (如果需要):**
    - **终端命令审核**: 如果AI需要运行命令，一个黄色的警告对话框会弹出，等待您“批准”。
    - **迭代审核**: 当一轮工作完成后，如果结果不够完美，一个蓝色的信息对话框会弹出，询问您是否“继续”进行下一轮优化。
6.  **完成:** 当任务达到完美（或您选择终止），工作流程结束。您可以从“最终产物”窗口复制代码，或查阅自动生成的详细任务报告。

---

### 4. 高级配置：打造您自己的AI团队

通过“设置”标签页，您可以成为自己AI团队的架构师。

- **编辑角色:**
    - 在“角色配置”列表中，点击任意角色旁边的 **"编辑"** 按钮。
    - **修改系统提示**: 您可以重写角色的核心指令。例如，您可以告诉“工人”智能体总是使用TypeScript并遵循特定的编码风格。
    - **分配可用工具**: 对于“工人”角色，您可以精确地勾选它被允许使用的工具。例如，您可以创建一个“安全模式”的工人，取消它对 `terminal.executeCommand` 的使用权限。
- **创建新角色:**
    - 点击 **"添加新角色"**。
    - 您可以创建一个全新的、具有特定专长的角色。例如，创建一个名为 "CSS-Master" 的角色，其系统提示是“你是一位专注于使用Tailwind CSS创建优美UI的专家”，并只授予它文件读写权限。
    - 创建后，不要忘记在“模型定义”中为其分配一个模型。
- **删除角色:**
    - 点击角色旁的 **"删除"** 按钮可以移除自定义的角色。

---

### 5. 高级功能详解

在“设置”标签页的底部，您可以找到一系列功能开关。

- **`Enable Smart Scan` (启用智能扫描)**
    - **关闭 (默认)**: 任务开始前，AI会读取**每个文件**的内容并进行总结，上下文最完整，但对于大项目可能较慢。
    - **开启**: 任务开始前，AI只扫描**文件名和目录结构**。它会使用 `fileSystem.summarizeFile` 工具在需要时按需读取和总结文件内容。速度更快，但初始上下文较少。
- **`Enable Parallel Exec` (启用并行执行)**
    - **开启 (默认)**: 在计划中没有依赖关系的任务（例如，安装两个独立的npm包）将会被**同时执行**，显著缩短执行时间。
- **`Enable Auto Mode` (启用自动模式)**
    - **关闭 (默认)**: 出于安全考虑，执行终端命令和进行新一轮优化前需要用户批准。
    - **开启**: **跳过所有用户批准步骤**。这是一个“信任模式”，适用于您完全信任AI团队来完成任务的场景。
- **`Enable Persistence` (启用持久化)**
    - **开启 (默认)**: 如果任务在执行中被中断（例如关闭VS Code），插件会保存当前状态。下次您启动同一个项目时，它会询问您是否要从断点继续。
- **`Enable Long Term Memory` (启用长期记忆)**
    - **开启 (默认)**: 任务结束后，“知识提取者”智能体会将本次任务的关键信息（例如，项目特定的构建命令）存入一个长期的、跨任务共享的知识库中。
- **`Enable Agent Collaboration` (启用智能体协作)**
    - **开启 (默认)**: 激活`agent.sendMessage`和`agent.createSubTask`等高级工具，允许智能体之间进行动态通信、委派和审查，实现更复杂的团队工作流。

---

感谢使用！希望这个AI团队能成为您得力的编程助手。
