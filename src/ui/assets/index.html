<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多智能体任务状态</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <h1>多智能体助手</h1>

    <div class="tabs">
        <button class="tab-button active" data-tab="status">任务状态</button>
        <button class="tab-button" data-tab="workspace">工作区状态</button>
        <button class="tab-button" data-tab="settings">设置</button>
    </div>

    <!-- Status Tab Content -->
    <div id="status" class="tab-content active">
        <div class="container">
             <div class="section">
                <h2>总体目标</h2>
                <p id="overall-goal">等待任务开始...</p>
            </div>
            <div class="section">
                <h2>当前计划</h2>
                <ul id="plan-list"></ul>
                <div id="plan-review-container" style="display: none;">
                    <h3>请审核并批准计划</h3>
                    <div id="editable-plan-list"></div>
                    <div class="form-buttons">
                        <button id="approve-plan-btn" class="button-primary">批准计划并执行</button>
                        <button id="cancel-plan-btn" class="button">取消任务</button>
                    </div>
                </div>
            </div>
            <div class="section">
                <h2>执行日志</h2>
                <div id="execution-log" class="log-box"></div>
            </div>
            <div class="section">
                <h2>最终产物</h2>
                <pre id="final-artifact" class="code-box"><code></code></pre>
            </div>
        </div>
    </div>

    <!-- Workspace Tab Content -->
    <div id="workspace" class="tab-content">
        <button id="refresh-status-btn" class="button">刷新状态</button>
        <div class="container">
            <div class="section">
                <h2>文件系统</h2>
                <div id="fs-status" class="log-box"></div>
            </div>
             <div class="section">
                <h2>调试器</h2>
                <div id="debugger-status"></div>
            </div>
            <div class="section">
                <h2>Git</h2>
                <div id="git-status"></div>
            </div>
        </div>
    </div>


    <!-- Settings Tab Content -->
    <div id="settings" class="tab-content">
        <div class="container">
            <h2>模型配置</h2>
            <div id="models-list"></div>
            <button id="add-model-btn" class="button">添加新模型</button>
        </div>

        <div id="roles-container" class="container">
            <h2>角色配置</h2>
            <div id="roles-list"></div>
            <button id="add-role-btn" class="button">添加新角色</button>
        </div>

        <div class="container">
            <h2>高级设置</h2>
            <div id="advanced-settings">
                <div class="setting-item">
                    <label for="setting-smart-scan">启用智能扫描 (按需读取文件):</label>
                    <input type="checkbox" id="setting-smart-scan">
                </div>
                <div class="setting-item">
                    <label for="setting-parallel-exec">启用并行任务执行:</label>
                    <input type="checkbox" id="setting-parallel-exec">
                </div>
                <div class="setting-item">
                    <label for="setting-auto-mode">启用自动模式 (无需手动批准):</label>
                    <input type="checkbox" id="setting-auto-mode">
                </div>
                <div class="setting-item">
                    <label for="setting-persistence">启用任务持久化 (可恢复任务):</label>
                    <input type="checkbox" id="setting-persistence">
                </div>
                <div class="setting-item">
                    <label for="setting-long-term-memory">启用长期记忆 (实验性):</label>
                    <input type="checkbox" id="setting-long-term-memory">
                </div>
                <div class="setting-item">
                    <label for="setting-agent-collaboration">启用智能体协作 (实验性):</label>
                    <input type="checkbox" id="setting-agent-collaboration">
                </div>
            </div>
        </div>
        <div class="container">
            <h2>配置健康检查</h2>
            <p>点击按钮检查您的模型和角色配置是否正确。</p>
            <button id="health-check-btn" class="button">运行检查</button>
            <div id="health-check-spinner" class="spinner" style="display: none;"></div>
            <pre id="health-check-results" class="log-box" style="display: none;"></pre>
        </div>

        <button id="save-settings-btn" class="button-primary">保存所有设置</button>
    </div>

    <!-- Editor Modal (repurposed for both models and roles) -->
    <div id="editor-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="editor-title">编辑器</h3>
            <div id="model-editor-fields">
                <!-- Model fields will be injected by JS -->
            </div>
            <div id="role-editor-fields">
                <!-- Role fields will be injected by JS -->
            </div>
            <div class="form-buttons">
                <button id="save-editor-btn" class="button-primary">保存</button>
                <button id="cancel-editor-btn" class="button">取消</button>
            </div>
        </div>
    </div>


    <script src="main.js"></script>
</body>
</html>
